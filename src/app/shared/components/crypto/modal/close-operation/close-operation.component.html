<!-- Alert Iconed Action Sheet -->
<div
  class="modal fade action-sheet"
  id="{{ modalId }}"
  tabindex="-1"
  role="dialog"
  data-bs-focus="false"
>
  <div class="modal-dialog fullbig-modal" role="document">
    <div class="modal-content modal-round mx-auto fullbig-modal">
      <div class="modal-body">
        <div class="action-sheet-content fullbig-modal">
          <div class="iconbox text-warning">
            <ion-icon name="alert-circle"></ion-icon>
          </div>
          <div class="text-center">
            <h3>
              {{ "crypto.closeOperation.title" | translate }}
              <ion-icon
                name="alert-circle"
                style="width: 20px; height: 20px; vertical-align: -2px"
                data-bs-toggle="modal"
                attr.data-bs-target="#{{ modalConstant.INFO }}"
              ></ion-icon>
            </h3>
            <p [innerHTML]="'crypto.closeOperation.subTitle' | translate"></p>
            <hr />
            <div class="splash-page mb-5">
              <div class="transfer-verification">
                <div class="transfer-amount">
                  <span class="caption">Amount</span>
                  <h2>{{ operation?.entryCoin }} {{ currentPrice }}</h2>
                  <p style="margin-top: -20px">
                    <small
                      >{{ operation?.exitCoin }}
                      {{ operation?.entryQuantity }}</small
                    >
                  </p>
                </div>
                <div class="from-to-block mb-5">
                  <div class="item text-center">
                    <img
                      src="{{ operation?.asset?.icon }}"
                      alt="avatar"
                      class="imaged w48"
                    />
                    <strong>{{ operation?.asset?.name }}</strong>
                  </div>
                  <div class="item text-center">
                    <img
                      src="{{ operation?.assetSell?.icon }}"
                      alt="avatar"
                      class="imaged w48"
                    />
                    <strong>{{ operation?.assetSell?.name }}</strong>
                  </div>
                  <div class="arrow"></div>
                </div>
              </div>
              <!--<h2 class="mb-2 mt-2">Verify the Transaction</h2>-->
              <div
                class="mx-auto"
                style="
                  max-width: 500px;
                  margin-top: -45px;
                  margin-bottom: -25px;
                "
              >
                <!-- timeline -->
                <div class="timeline timed ms-1 me-2">
                  <div class="item">
                    <span class="time">{{
                      operation?.entryDate | date : "d MMM y"
                    }}</span>
                    <div class="dot bg-success"></div>
                    <div class="content">
                      <h5 class="title text-start">
                        Position Open on Coins
                        {{ operation?.asset?.symbol }}/{{
                          operation?.assetSell?.symbol
                        }}
                      </h5>
                      <div class="text text-start">
                        <p>
                          Trading Pair:
                          <strong
                            >{{ operation?.assetSell?.symbol }}/{{
                              operation?.asset?.symbol
                            }}</strong
                          >
                        </p>
                        <p class="p">
                          Quantity:
                          <strong
                            >{{ operation?.entryQuantity }}
                            {{ operation?.exitCoin }}</strong
                          >
                        </p>
                        <p class="p">
                          Quantity Value:
                          <strong
                            >{{ operation?.entryPriceValue }}
                            {{ operation?.entryCoin }}</strong
                          >
                        </p>
                        <p class="p">
                          Buying Price of {{ operation?.exitCoin }}:
                          <strong
                            >{{ operation?.entryPrice }}
                            {{ cryptoCurrency }}</strong
                          >
                        </p>
                      </div>
                    </div>
                  </div>
                  <div class="item">
                    <span class="time">{{
                      operation?.exitDate | date : "d MMM y"
                    }}</span>
                    <div class="dot bg-danger"></div>
                    <div *ngIf="isEditActive" class="content">
                      <form #f="ngForm" type="submit">
                        <div class="row">
                          <div class="col-12 col-md-6">
                            <div class="form-group basic">
                              <div class="input-wrapper">
                                <label class="label" for="quantity1"
                                  >Quantity ({{
                                    operation?.assetSell?.symbol
                                  }})</label
                                >
                                <input
                                  name="quantity"
                                  #quantity1="ngModel"
                                  type="number"
                                  class="form-control"
                                  id="quantity1"
                                  placeholder="Enter an Amount"
                                  [(ngModel)]="operation!.exitQuantity"
                                />
                                <i class="clear-input">
                                  <ion-icon name="close-circle"></ion-icon>
                                </i>
                              </div>
                            </div>
                          </div>
                          <div class="col-12 col-md-6">
                            <div class="form-group basic">
                              <div class="input-wrapper">
                                <label class="label" for="quantityValue1"
                                  >Quantity Value ({{ cryptoCurrency }})</label
                                >
                                <input
                                  name="quantityValue"
                                  #quantityValue1="ngModel"
                                  type="number"
                                  class="form-control"
                                  id="quantityValue1"
                                  placeholder="Enter an Amount"
                                  [(ngModel)]="operation!.exitPriceValue"
                                />
                                <i class="clear-input">
                                  <ion-icon name="close-circle"></ion-icon>
                                </i>
                              </div>
                            </div>
                          </div>
                          <div class="col-12">
                            <div class="form-group basic">
                              <div class="input-wrapper">
                                <label class="label" for="price1"
                                  >Selling Price ({{
                                    operation?.asset?.symbol
                                  }})</label
                                >
                                <input
                                  name="price"
                                  #price1="ngModel"
                                  type="number"
                                  class="form-control"
                                  id="price1"
                                  placeholder="Enter an Amount"
                                  [(ngModel)]="operation!.exitPrice"
                                />
                                <i class="clear-input">
                                  <ion-icon name="close-circle"></ion-icon>
                                </i>
                              </div>
                            </div>
                          </div>
                        </div>
                      </form>
                    </div>
                    <div *ngIf="!isEditActive" class="content">
                      <h5 class="title text-start">
                        Position Close on Coins
                        {{ operation?.asset?.symbol }}/{{
                          operation?.assetSell?.symbol
                        }}
                      </h5>
                      <div class="text text-start">
                        <p>
                          Trading Pair:
                          <strong
                            >{{ operation?.asset?.symbol }}/{{
                              operation?.assetSell?.symbol
                            }}</strong
                          >
                        </p>
                        <p class="p">
                          Quantity:
                          <strong
                            >{{ operation?.exitQuantity }}
                            {{ operation?.entryCoin }}</strong
                          >
                        </p>
                        <p class="p">
                          Quantity Value:
                          <strong
                            >{{ operation?.exitPriceValue }}
                            {{ cryptoCurrency }}
                            <span
                              class="badge {{
                                operation?.trend == 0
                                  ? 'badge-warning'
                                  : operation?.trend! < 0
                                  ? 'badge-danger'
                                  : 'badge-success'
                              }}"
                              >{{ cryptoCurrency }} {{ operation?.trend }} ({{
                                operation?.performance
                              }}%)</span
                            ></strong
                          >
                        </p>
                        <p class="p">
                          Selling Price of {{ operation?.exitCoin }}:
                          <strong
                            >{{ operation?.exitPrice }}
                            {{ cryptoCurrency }}</strong
                          >
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- * timeline -->
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-6">
              <a
                *ngIf="!isEditActive"
                (click)="isEditActive = true"
                class="btn btn-lg btn-outline-secondary btn-block goBack"
                >Edit</a
              >
              <a
                *ngIf="isEditActive"
                (click)="refreshData()"
                class="btn btn-lg btn-primary btn-block goBack"
                >Save</a
              >
            </div>
            <div class="col-6">
              <a
                class="btn btn-danger btn-lg btn-block"
                data-bs-toggle="modal"
                >{{ "crypto.cryptoModal.info.close" | translate }}</a
              >
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- * Alert Iconed Action Sheet -->

<app-info-modal
  [isClosingOperation]="true"
  [modalId]="modalConstant.INFO"
  [operationType]="operationTypeConstant.CLOSEOPERATION"
></app-info-modal>
